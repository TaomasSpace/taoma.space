<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TAOMAâ„¢ â€” Skills</title>
  <meta name="description" content="Back-end skills by TAOMAâ„¢ â€” live demos and specialties." />
  <link rel="icon" type="image/png" href="/static/icon.png" />
  <style>
    /* reuse your existing base variables + components (copy from other pages) */
    *,
    *::before,
    *::after {
      box-sizing: border-box
    }

    :root {
      --bg: #0e1020;
      --bg-soft: #141735;
      --card: #171b3b;
      --ink: #e9ebff;
      --muted: #a2a9c8;
      --acc: #85a3ff;
      --ring: #85a3ff55;
      --radius: 16px;
      --space: clamp(16px, 2vw, 24px);
      --container: 1100px;
      --shadow: 0 10px 30px rgba(0, 0, 0, .35), 0 2px 8px rgba(0, 0, 0, .25)
    }

    body {
      margin: 0;
      font: 15px/1.6 Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Arial, sans-serif;
      color: var(--ink);
      background: var(--bg);
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
      position: relative
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
      background:
        radial-gradient(1400px 900px at 12% -8%, #1b1f45 0%, #1b1f45 35%, transparent 72%),
        radial-gradient(1200px 800px at 100% -10%, #0b4ea8 0%, #0b4ea8 28%, transparent 68%),
        radial-gradient(900px 500px at 95% 115%, #0b4ea84d 0%, transparent 60%),
        linear-gradient(160deg, #0f1531 0%, #0e1020 72%)
    }

    a {
      text-decoration: none;
      color: inherit
    }

    img {
      max-width: 100%;
      display: block
    }

    .container {
      max-width: var(--container);
      margin: 0 auto;
      padding-inline: var(--space)
    }

    header {
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: saturate(1.1) blur(10px);
      background: linear-gradient(180deg, #0c0f24cc 0%, #0c0f2400 100%);
      border-bottom: 1px solid #ffffff14
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 64px
    }

    .brand {
      display: flex;
      align-items: center;
      gap: .75rem;
      font-weight: 800;
      letter-spacing: .4px
    }

    .brand .logo {
      width: 28px;
      height: 28px;
      border-radius: 8px
    }

    .links {
      display: flex;
      gap: 1rem;
      align-items: center
    }

    .links a {
      padding: .45rem .7rem;
      border-radius: 10px;
      border: 1px solid transparent
    }

    .links a:hover {
      border-color: #ffffff1f;
      background: #ffffff0f
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: .6rem;
      padding: .75rem 1rem;
      border-radius: 12px;
      background: var(--acc);
      color: #fff;
      font-weight: 600;
      border: 1px solid #ffffff1a;
      box-shadow: var(--shadow)
    }

    .btn.ghost {
      background: transparent;
      color: var(--ink);
      border: 1px solid #ffffff26;
      box-shadow: none
    }

    .card {
      background: linear-gradient(180deg, color-mix(in oklab, var(--card), transparent 8%), var(--card));
      border: 1px solid #ffffff1a;
      border-radius: var(--radius);
      box-shadow: var(--shadow)
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: .4rem;
      padding: .35rem .6rem;
      border-radius: 999px;
      background: color-mix(in oklab, var(--acc) 15%, transparent);
      border: 1px solid #ffffff1a;
      font-size: .85rem
    }

    .muted {
      color: var(--muted)
    }

    .hero {
      padding-block: clamp(48px, 8vw, 120px) clamp(16px, 3vw, 28px);
      text-align: center
    }

    .hero .title {
      font-size: clamp(28px, 6vw, 56px);
      line-height: 1.1;
      margin: 0 0 .6rem
    }

    .hero .subtitle {
      font-size: clamp(16px, 2.6vw, 20px);
      color: var(--muted);
      margin: 0
    }

    .grid {
      display: grid;
      gap: clamp(14px, 2vw, 20px)
    }

    .grid.cols-3 {
      grid-template-columns: repeat(3, 1fr)
    }

    @media (max-width:950px) {
      .grid.cols-3 {
        grid-template-columns: repeat(2, 1fr)
      }
    }

    @media (max-width:640px) {
      .grid.cols-3 {
        grid-template-columns: 1fr
      }
    }

    .card.pad {
      padding: 1.1rem
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      gap: .5rem
    }

    .skills {
      display: flex;
      flex-wrap: wrap;
      gap: .5rem
    }

    /* progress */
    .progress {
      height: 10px;
      border-radius: 999px;
      background: #ffffff14;
      overflow: hidden;
      border: 1px solid #ffffff1a
    }

    .progress>span {
      display: block;
      height: 100%;
      width: 0%;
      background: var(--acc);
      transition: width .3s ease
    }

    footer {
      border-top: 1px solid #ffffff14;
      padding-block: 24px;
      margin-top: auto
    }

    .foot {
      display: flex;
      gap: 1rem;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap
    }

    .social {
      display: flex;
      gap: .6rem
    }

    .social a {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 12px;
      border: 1px solid #ffffff26
    }

    /* --- Header --- */
    header {
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: saturate(1.1) blur(10px);
      background: linear-gradient(180deg, #0c0f24cc 0%, #0c0f2400 100%);
      border-bottom: 1px solid #ffffff14
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 64px
    }

    .brand {
      display: flex;
      align-items: center;
      gap: .75rem;
      font-weight: 800;
      letter-spacing: .4px
    }

    .brand .logo {
      width: 28px;
      height: 28px;
      border-radius: 8px;
      display: block;
    }


    .links {
      display: flex;
      gap: 1rem;
      align-items: center
    }

    .links a {
      padding: .45rem .7rem;
      border-radius: 10px;
      border: 1px solid transparent
    }

    .links a:hover {
      border-color: #ffffff1f;
      background: #ffffff0f
    }

    .mobile-toggle {
      display: none
    }

    @media (max-width:800px) {
      .mobile-toggle {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 10px;
        border: 1px solid #ffffff26;
        background: transparent
      }

      .links {
        position: fixed;
        inset: 64px 0 auto 0;
        background: linear-gradient(180deg, #0b0f29, #0b0f2945);
        padding: 1rem;
        display: none;
        flex-direction: column
      }

      .links.open {
        display: flex
      }
    }

    :focus-visible {
      outline: 2px solid var(--acc);
      outline-offset: 2px;
      box-shadow: 0 0 0 6px var(--ring)
    }

    .code {
      white-space: pre;
      background: #0b0f29;
      padding: .75rem;
      border-radius: 12px;
      border: 1px solid #ffffff1a;
      overflow: auto;
    }

    #echoOut p {
      margin: .25rem 0;
    }

    #echoOut code {
      background: #0b0f29;
      padding: .1rem .35rem;
      border-radius: 6px;
      border: 1px solid #ffffff1a;
    }

    .visitor-counter {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      font: 600 15px/1.4 Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Arial, sans-serif;
      color: var(--ink);
      padding: 0.25rem 0.6rem;
      border-radius: 8px;
      background: color-mix(in oklab, var(--card) 35%, transparent);
      border: 1px solid #ffffff1a;
    }

    .visitor-counter svg {
      width: 18px;
      height: 18px;
      flex-shrink: 0;
      color: var(--muted);
    }

    .auth {
      display: flex;
      align-items: center;
      gap: .5rem;
    }

    .auth .btn.small {
      padding: .5rem .7rem;
      border-radius: 10px;
      background: transparent;
      color: var(--ink);
      border: 1px solid #ffffff26;
      box-shadow: none;
      font-weight: 600;
    }

    .avatar-btn {
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      padding: .35rem .55rem;
      border-radius: 999px;
      background: #ffffff10;
      border: 1px solid #ffffff26;
      cursor: pointer;
    }

    .avatar {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      object-fit: cover;
      display: block;
      background: #0f1331;
    }

    .avatar-fallback {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      display: grid;
      place-items: center;
      font: 700 12px/1 Inter, ui-sans-serif;
      background: #25306a;
      color: #e9ebff;
    }

    .menu {
      position: absolute;
      margin-top: .4rem;
      right: 0;
      min-width: 160px;
      z-index: 60;
      background: linear-gradient(180deg, color-mix(in oklab, var(--card), transparent 8%), var(--card));
      border: 1px solid #ffffff22;
      border-radius: 12px;
      box-shadow: var(--shadow);
      padding: .35rem;
      display: none;
    }

    .menu.open {
      display: block;
    }

    .menu a,
    .menu button {
      width: 100%;
      text-align: left;
      display: block;
      background: transparent;
      color: var(--ink);
      padding: .55rem .65rem;
      border: 0;
      border-radius: 10px;
      cursor: pointer;
    }

    .menu a:hover,
    .menu button:hover {
      background: #ffffff12;
    }

    .darkmode {
      background: linear-gradient(to right, blue, pink);
      height: 40px;
      width: 40px;
      border-radius: 10px;
      border: 1px solid #ffffff26; /* passt zum restlichen Stil */
      box-shadow: var(--shadow);
      cursor: pointer;
    }
    .darkmode:focus-visible {
      outline: 2px solid var(--acc);
      outline-offset: 2px;
      box-shadow: 0 0 0 6px var(--ring);
    }
  </style>
</head>

<body>
  <header>
    <div class="container nav" role="navigation" aria-label="Primary">
      <div class="brand">
        <a href="/"><img class="logo" src="/static/icon.png" alt="TAOMA logo" width="28" height="28"></a>
        <a href="/"><span>TAOMAâ„¢</span></a>
      </div>

      <button type="button" class="mobile-toggle" id="mobileToggle" aria-controls="primary-menu" aria-expanded="false"
        aria-label="Toggle menu">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
      </button>

      <nav id="primary-menu" class="links" aria-label="Site">
        <a href="/">Home</a>
        <a href="/projects">Projects</a>
        <a href="/about">About</a>
        <a href="/contact">Contact</a>
        <a href="/skills">Skills</a>
      </nav>

      <div id="authSlot" class="auth"></div>
    </div>
  </header>
  <main class="container">
    <section class="hero">
      <h1 class="title">What Iâ€™m good at</h1>
      <p class="subtitle">Back-end first. Fast APIs, clean schemas, simple ops. Try the live demos below ðŸ‘‡</p>
    </section>

    <!-- Skill chips -->
    <section>
      <h2 class="section-title">Specialties</h2>
      <div class="card pad">
        <div class="skills" aria-label="Skills">
          <span class="chip">FastAPI</span>
          <span class="chip">REST design</span>
          <span class="chip">Async / Background jobs</span>
          <span class="chip">Pydantic validation</span>
          <span class="chip">Postgres / SQLite</span>
          <span class="chip">Auth basics (tokens)</span>
          <span class="chip">CI/CD (Render/Oracle)</span>
          <span class="chip">Monitoring basics</span>
          <span class="chip">Discord Bots</span>
        </div>
      </div>
    </section>

    <!-- Interactive demos -->
    <section>
      <h2 class="section-title">Interactive Frontend Demos</h2>
      <div class="selection">
        <button id="whitemode">White mode</button>
        <button class="darkmode" onclick=setDarkModeDemo()> </button>
      </div>
      <div class="displaySection" id="displaySection">

      </div>
      
    </section>

    <section style="margin-top:1rem">
      <div class="card pad">
        <p style="margin:0" class="muted">
          Like what you see? I build fast, maintainable APIs and back-end tools.
        </p>
        <div class="row" style="margin-top:.6rem">
          <a class="btn" href="/contact">Letâ€™s work together</a>
          <a class="btn ghost" href="/projects">See projects</a>
        </div>
      </div>
    </section>
    <br>
  </main>

  <footer>
    <div class="container foot">
      <small class="muted">Â© <span id="year"></span> TAOMAâ„¢. All rights reserved.</small>
      <div class="visitor-counter">
        <!-- Eye Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
        </svg>
        <span id="visitor-count">0</span>
      </div>
      <div class="social">
        <a href="https://guns.lol/taoma" target="_blank" rel="noreferrer" aria-label="guns.lol">
          <svg width="18" height="18" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
            <!-- Beispiel: Platzhalter Pistolen-Icon -->
            <path
              d="M256 32C132 32 32 132 32 256s100 224 224 224 224-100 224-224S380 32 256 32Zm80 160h32v32h-32v32h-32v-32h-32v-32h32v-32h32v32Z" />
          </svg>
        </a>
        <a href="https://github.com/TaomasSpace" target="_blank" rel="noreferrer" aria-label="GitHub">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M12 2C6.477 2 2 6.477 2 12a10 10 0 0 0 6.838 9.488c.5.092.682-.216.682-.48 0-.237-.01-1.026-.015-1.862-2.782.604-3.369-1.18-3.369-1.18-.455-1.156-1.11-1.464-1.11-1.464-.907-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.088 2.91.833.092-.647.35-1.088.636-1.339-2.22-.252-4.555-1.11-4.555-4.943 0-1.091.39-1.987 1.03-2.688-.103-.252-.447-1.268.098-2.643 0 0 .84-.269 2.75 1.026A9.58 9.58 0 0 1 12 6.844c.85.004 1.707.115 2.506.337 1.909-1.295 2.748-1.026 2.748-1.026.547 1.375.203 2.39.1 2.643.64.701 1.028 1.597 1.028 2.688 0 3.842-2.338 4.688-4.566 4.936.358.31.677.92.677 1.855 0 1.338-.012 2.419-.012 2.748 0 .267.18.577.688.478A10.003 10.003 0 0 0 22 12c0-5.523-4.477-10-10-10Z"
              fill="currentColor" />
          </svg>
        </a>
        <a href="mailto:Taoma.M@proton.me" aria-label="Email">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 6h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2Zm16 0-8 7L4 6"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </a>
        <a href="https://discord.gg/H3NDg7e3vD" target="_blank" rel="noreferrer" aria-label="Discord">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M20 4a18 18 0 0 0-4.5-1.5l-.2.4A16.4 16.4 0 0 1 12 3c-1.1 0-2.2.1-3.3.3l-.2-.4A18 18 0 0 0 4 4c-1.3 2-2 4.2-2 6.5 0 6.7 4.5 8.6 8.8 8.6h.7l-.3-1a9 9 0 0 1-1.7-.6l.4-.2c.8.4 1.7.6 2.6.6s1.8-.2 2.6-.6l.4.2a9 9 0 0 1-1.7.6l-.3 1h.7C17.5 19.1 22 17.2 22 10.5 22 8.2 21.3 6 20 4ZM9.5 14.2c-.8 0-1.5-.8-1.5-1.8s.7-1.8 1.5-1.8S11 11.4 11 12.4s-.7 1.8-1.5 1.8Zm5 0c-.8 0-1.5-.8-1.5-1.8s.7-1.8 1.5-1.8 1.5.8 1.5 1.8-.7 1.8-1.5 1.8Z"
              fill="currentColor" />
          </svg>
        </a>
      </div>
    </div>
  </footer>

  <script>
    // mobile menu
    const toggle = document.getElementById('mobileToggle');
    const menu = document.getElementById('primary-menu');
    toggle?.addEventListener('click', () => {
      const open = menu.classList.toggle('open');
      toggle.setAttribute('aria-expanded', String(open));
    });
    // year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Ping demo
    const btnPing = document.getElementById('btnPing');
    const pingOut = document.getElementById('pingOut');
    const pingBar = document.getElementById('pingBar');
    btnPing?.addEventListener('click', async () => {
      pingOut.textContent = "Runningâ€¦";
      pingBar.style.width = "0%";
      const t0 = performance.now();
      try {
        const r = await fetch('/api/ping', { cache: 'no-store' });
        const data = await r.json();
        const ms = Math.round(performance.now() - t0);
        pingOut.textContent = `~${ms}ms â€¢ server: ${new Date(data.server_time).toUTCString()}`;
        pingBar.style.width = Math.min(100, Math.max(5, ms)) + "%";
      } catch (e) {
        pingOut.textContent = "Failed.";
      }
    });

    // Echo demo
    const btnEcho = document.getElementById('btnEcho');
    const echoIn = document.getElementById('echoIn');
    const echoOut = document.getElementById('echoOut');

    btnEcho?.addEventListener('click', async () => {
      echoOut.textContent = "Sendingâ€¦";
      let body;
      try {
        body = JSON.parse(echoIn.value);
      } catch {
        echoOut.textContent = "Invalid JSON.";
        return;
      }

      try {
        const r = await fetch('/api/echo', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(body)
        });
        const res = await r.json();

        if (r.ok && res?.data) {
          echoOut.innerHTML = res.data;
        } else {
          echoOut.textContent = "Validation failed.";
        }
      } catch {
        echoOut.textContent = "Request failed.";
      }
    });

    // Job demo
    const btnJob = document.getElementById('btnJob');
    const jobSec = document.getElementById('jobSeconds');
    const jobOut = document.getElementById('jobOut');
    const jobBar = document.getElementById('jobBar');
    btnJob?.addEventListener('click', async () => {
      jobOut.textContent = "Queueingâ€¦";
      jobBar.style.width = "0%";
      try {
        const r = await fetch('/api/job', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ seconds: Number(jobSec.value) || 3 })
        });
        const { job_id } = await r.json();
        if (!job_id) { jobOut.textContent = "Failed to create job."; return; }
        jobOut.textContent = `Job ${job_id.slice(0, 8)}â€¦ running`;
        const t = setInterval(async () => {
          const st = await fetch(`/api/job/${job_id}`, { cache: 'no-store' }).then(x => x.json());
          if (!st.ok) { jobOut.textContent = "Job not found."; clearInterval(t); return; }
          jobBar.style.width = (st.progress || 0) + "%";
          if (st.status === "done") { jobOut.textContent = "Done âœ”"; clearInterval(t); }
        }, 700);
      } catch {
        jobOut.textContent = "Failed.";
      }
    });

    //visitor counter
    (async () => {
      const KEY = "taoma_last_counted_at";
      const DAY = 24 * 60 * 60 * 1000;
      const now = Date.now();
      const last = parseInt(localStorage.getItem(KEY) || "0", 10);
      const shouldCount = !last || (now - last) > DAY;

      if (shouldCount) {
        navigator.sendBeacon("/api/visits/increment");
        localStorage.setItem(KEY, String(now));
      }

      const res = await fetch("/api/visits/value");
      const { total } = await res.json();
      document.getElementById("visitor-count").textContent = total ?? "0";
    })();
    function escapeHtml(value) {
      return String(value ?? '').replace(/[&<>"']/g, (ch) => ({
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;',
      })[ch] || ch);
    }

    function sanitizeUrl(raw) {
      if (typeof raw !== 'string') return '';
      const trimmed = raw.trim();
      if (!trimmed) return '';
      if (trimmed.startsWith('javascript:')) return '';
      try {
        const u = new URL(trimmed, window.location.origin);
        if (['http:', 'https:'].includes(u.protocol)) {
          return trimmed.startsWith('http://') || trimmed.startsWith('https://') ? u.href : trimmed;
        }
      } catch (_) {
        if (trimmed.startsWith('/') && !trimmed.startsWith('//')) return trimmed;
      }
      return '';
    }

    async function fetchSession() {
      try {
        const r = await fetch('/api/auth/verify', { credentials: 'include' });
        if (!r.ok) return null;
        return await r.json();
      } catch (_) {
        return null;
      }
    }

    // === Auth header renderer ===
    async function renderAuthHeader() {
      const slot = document.getElementById('authSlot');
      if (!slot) return;

      const session = await fetchSession();
      const user = session?.user || null;
      const isAdmin = !!(user && user.admin);

      if (!user) {
        slot.innerHTML = `
        <a class="btn small" href="/login">Login</a>
        <a class="btn small" href="/register">Register</a>
      `;
        return;
      }

      const unameRaw = user.username || 'User';
      const uname = escapeHtml(unameRaw);
      const initials = unameRaw.trim().slice(0, 2).toUpperCase() || 'U';
      const pfp = sanitizeUrl(user.profile_picture ? String(user.profile_picture) : '');

      slot.innerHTML = `
      <div class="auth-box" style="position:relative">
        <button class="avatar-btn" id="avatarBtn" aria-haspopup="menu" aria-expanded="false">
          ${pfp ? `<img class="avatar" src="${pfp}" alt="${uname}'s profile picture">`
          : `<span class="avatar-fallback" aria-hidden="true">${escapeHtml(initials)}</span>`}
          <span class="uname" style="font-weight:700;font-size:.95rem">${uname}</span>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
        <div class="menu" id="userMenu" role="menu" aria-label="User menu">
          <a href="/profile" role="menuitem">Profile</a>
          ${isAdmin ? `<a href="/admin" role="menuitem">Admin</a>` : ``}
          <button id="logoutBtn" role="menuitem">Logout</button>
        </div>
      </div>
    `;

      const btn = slot.querySelector('#avatarBtn');
      const menu = slot.querySelector('#userMenu');
      const logoutBtn = slot.querySelector('#logoutBtn');

      function closeMenu() {
        menu.classList.remove('open');
        btn.setAttribute('aria-expanded', 'false');
      }

      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        const open = menu.classList.toggle('open');
        btn.setAttribute('aria-expanded', String(open));
      });

      document.addEventListener('click', (e) => {
        if (!menu.contains(e.target) && !btn.contains(e.target)) closeMenu();
      });

      logoutBtn.addEventListener('click', async () => {
        try {
          await fetch('/api/auth/logout', { method: 'POST', credentials: 'include' });
        } catch { }
        window.location.href = '/';
      }, { passive: true });
    }

    // Render bei Load
    renderAuthHeader();

    function setDarkModeDemo() {
      const section = document.getElementById("displaySection");
      section.innerHTML = '<button style="background:black; font:white;"> This is the dark mode </button>'
    }
  </script>
</body>

</html>