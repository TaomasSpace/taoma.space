<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TAOMA Space ‚Äî GIF API & Linktree</title>
    <meta
      name="description"
      content="Explore the Anime GIF API, add your own GIFs, and build a Linktree that actually converts."
    />
    <meta property="og:title" content="TAOMA Space ‚Äî GIF API & Linktree" />
    <meta
      property="og:description"
      content="Query the Anime GIF API, contribute new GIFs, and spin up a custom Linktree in minutes."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://taoma.space/" />
    <meta property="og:image" content="https://taoma.space/static/icon.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="TAOMA Space ‚Äî GIF API & Linktree" />
    <meta
      name="twitter:description"
      content="Query the Anime GIF API, contribute new GIFs, and spin up a custom Linktree in minutes."
    />
    <meta name="twitter:image" content="https://taoma.space/static/icon.png" />
    <link rel="canonical" href="https://taoma.space/" />
    <meta name="robots" content="index,follow" />
    <meta name="theme-color" content="#2563EB" />
    <link rel="icon" type="image/png" href="/static/icon.png" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "TAOMA Space",
        "url": "https://taoma.space/",
        "description": "Anime GIF API, GIF contributions und ein performanter Linktree Builder.",
        "inLanguage": "de",
        "publisher": {
          "@type": "Organization",
          "name": "TAOMA",
          "url": "https://taoma.space/",
          "logo": {
            "@type": "ImageObject",
            "url": "https://taoma.space/static/icon.png"
          },
          "email": "mailto:kontakt@taoma.space"
        }
      }
    </script>
    <style>
      :root {
        --primary: #2563eb;
        --primary-hover: #1d4ed8;
        --secondary: #64748b;
        --background: #ffffff;
        --surface: #f8fafc;
        --border: #e2e8f0;
        --text: #0f172a;
        --text-secondary: #475569;
        --success: #10b981;
        --error: #ef4444;
        --warning: #f59e0b;
        --radius-btn: 8px;
        --radius-card: 12px;
        --radius-input: 8px;
        --shadow-sm: 0 4px 12px rgba(15, 23, 42, 0.08);
        --shadow-md: 0 10px 24px rgba(15, 23, 42, 0.12);
        --container: 1280px;
      }

      * {
        box-sizing: border-box;
        font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto,
          sans-serif;
      }

      body {
        margin: 0;
        background: var(--background);
        color: var(--text);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      a {
        color: inherit;
        text-decoration: none;
      }

      img {
        max-width: 100%;
        display: block;
      }

      .container {
        width: min(100%, var(--container));
        margin: 0 auto;
        padding: 0 40px;
      }

      @media (max-width: 1024px) {
        .container {
          padding: 0 32px;
        }
      }

      @media (max-width: 768px) {
        .container {
          padding: 0 16px;
        }
      }

      :focus-visible {
        outline: 3px solid rgba(37, 99, 235, 0.3);
        outline-offset: 2px;
      }

      header {
        position: sticky;
        top: 0;
        z-index: 50;
        background: #ffffff;
        border-bottom: 1px solid var(--border);
      }

      .nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 72px;
        gap: 16px;
      }

      @media (max-width: 1024px) {
        .nav {
          height: 64px;
        }
      }

      @media (max-width: 768px) {
        .nav {
          height: 56px;
        }
      }

      .brand {
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        font-weight: 700;
        letter-spacing: 0.2px;
      }

      .brand .logo {
        width: 32px;
        height: 32px;
        border-radius: 8px;
      }

      .links {
        display: flex;
        gap: 32px;
        align-items: center;
      }

      .links a {
        padding-bottom: 6px;
        font-size: 15px;
        font-weight: 500;
        color: var(--text-secondary);
        position: relative;
      }

      .links a:hover {
        color: var(--text);
      }

      .links a[aria-current="page"] {
        color: var(--primary);
      }

      .links a[aria-current="page"]::after {
        content: "";
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        height: 2px;
        background: var(--primary);
        border-radius: 2px;
      }

      .mobile-toggle {
        display: none;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 8px;
        border: 1px solid var(--border);
        background: #ffffff;
        color: var(--text);
      }

      @media (max-width: 1024px) {
        .mobile-toggle {
          display: inline-flex;
        }

        .links {
          position: fixed;
          inset: 64px 0 auto 0;
          padding: 1rem 2rem;
          background: #ffffff;
          border-bottom: 1px solid var(--border);
          flex-direction: column;
          align-items: flex-start;
          display: none;
          gap: 0;
        }

        .links a {
          width: 100%;
          padding: 12px 0;
          border-bottom: 1px solid var(--border);
        }

        .links.open {
          display: flex;
        }
      }

      @media (max-width: 768px) {
        .links {
          inset: 56px 0 auto 0;
          padding: 1rem;
        }
      }

      .auth {
        display: flex;
        align-items: center;
        gap: 0.6rem;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.55rem;
        padding: 0 24px;
        height: 48px;
        border-radius: var(--radius-btn);
        background: var(--primary);
        color: #ffffff;
        font-weight: 600;
        border: 1px solid var(--primary);
        transition: background 0.2s ease, border-color 0.2s ease;
      }

      .btn:hover {
        background: var(--primary-hover);
        border-color: var(--primary-hover);
      }

      .btn.ghost {
        background: transparent;
        color: var(--text-secondary);
        border: 1px solid var(--border);
      }

      .btn.ghost:hover {
        color: var(--text);
        background: var(--surface);
      }

      .btn.small {
        height: 40px;
        padding: 0 16px;
        font-size: 14px;
      }

      .auth .btn.small {
        border-color: var(--border);
      }

      .auth-box {
        position: relative;
      }

      .avatar-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 6px 10px;
        border-radius: 999px;
        background: var(--surface);
        border: 1px solid var(--border);
        color: var(--text);
        cursor: pointer;
      }

      .avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        object-fit: cover;
      }

      .avatar-fallback {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: #e2e8f0;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        color: var(--text);
      }

      .menu {
        position: absolute;
        top: calc(100% + 8px);
        right: 0;
        background: #ffffff;
        border: 1px solid var(--border);
        border-radius: 12px;
        box-shadow: var(--shadow-sm);
        min-width: 180px;
        display: none;
        flex-direction: column;
        overflow: hidden;
        z-index: 20;
      }

      .menu.open {
        display: flex;
      }

      .menu a,
      .menu button {
        padding: 0.65rem 0.9rem;
        text-align: left;
        background: transparent;
        color: var(--text);
        border: 0;
        cursor: pointer;
        font-weight: 600;
      }

      .menu a:hover,
      .menu button:hover {
        background: var(--surface);
      }

      main {
        flex: 1;
        padding-bottom: 64px;
      }

      .hero {
        margin-top: 24px;
        padding: clamp(32px, 6vw, 80px);
        display: grid;
        grid-template-columns: 1.2fr 0.8fr;
        gap: clamp(24px, 5vw, 48px);
        align-items: center;
        background: linear-gradient(180deg, #f8fafc 0%, #ffffff 100%);
        border-radius: 24px;
      }

      .hero h1 {
        margin: 0 0 12px;
        font-size: clamp(32px, 5vw, 48px);
        line-height: 1.1;
      }

      .subtitle {
        font-size: clamp(16px, 2.4vw, 20px);
        color: var(--text-secondary);
        margin: 0 0 24px;
      }

      .eyebrow {
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
        padding: 6px 12px;
        border-radius: 999px;
        background: #eff6ff;
        border: 1px solid #dbeafe;
        font-weight: 600;
        color: var(--primary);
      }

      .cta-row {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
        align-items: center;
      }

      .cta-row.center {
        justify-content: center;
      }

      .tagline {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 12px;
        margin-top: 24px;
      }

      .pill {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 10px 14px;
        border-radius: 12px;
        background: var(--surface);
        border: 1px solid var(--border);
        color: var(--text-secondary);
        font-weight: 600;
      }

      .card {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: var(--radius-card);
        box-shadow: var(--shadow-sm);
        padding: 32px;
      }

      .card h3 {
        margin: 0 0 8px;
        font-size: 18px;
      }

      .card p {
        margin: 0 0 16px;
        color: var(--text-secondary);
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 32px;
      }

      .chip-row {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 16px;
      }

      .chip {
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        padding: 6px 12px;
        border-radius: 999px;
        background: #eff6ff;
        border: 1px solid #dbeafe;
        color: var(--primary);
        font-weight: 600;
        font-size: 0.9rem;
      }

      .section {
        padding: 80px 0;
      }

      .section h2 {
        margin: 0 0 8px;
        font-size: clamp(24px, 3vw, 36px);
      }

      .helper {
        color: var(--text-secondary);
        margin: 0 0 24px;
      }

      .code {
        font-family: "JetBrains Mono", "SFMono-Regular", Consolas, monospace;
        background: #f1f5f9;
        color: var(--text);
        padding: 16px;
        border-radius: 12px;
        border: 1px solid var(--border);
        overflow-x: auto;
        font-size: 14px;
        white-space: pre;
        margin: 0;
      }

      .mini-grid {
        display: grid;
        gap: 24px;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      }

      .notice {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        flex-wrap: wrap;
        padding: 16px 20px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: var(--surface);
        color: var(--text-secondary);
      }

      .cta {
        background: var(--primary);
        color: #ffffff;
        border-radius: 20px;
        padding: clamp(40px, 6vw, 80px);
        text-align: center;
      }

      .cta h2 {
        margin: 0 0 12px;
        color: #ffffff;
      }

      .cta p {
        margin: 0 0 24px;
        color: #e2e8f0;
      }

      .btn.light {
        background: #ffffff;
        color: var(--primary);
        border-color: #ffffff;
      }

      .btn.light:hover {
        background: #e2e8f0;
        border-color: #e2e8f0;
      }

      .cta .btn.ghost {
        border-color: rgba(255, 255, 255, 0.5);
        color: #ffffff;
        background: transparent;
      }

      .cta .btn.ghost:hover {
        background: rgba(255, 255, 255, 0.12);
      }

      .site-footer {
        background: #0f172a;
        color: #94a3b8;
        margin-top: 64px;
        padding: 60px 0 32px;
      }

      .footer-grid {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr;
        gap: 32px;
      }

      .footer-brand p {
        margin: 12px 0 0;
        color: #94a3b8;
        max-width: 300px;
      }

      .footer-links h3 {
        margin: 0 0 12px;
        font-size: 14px;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        color: #ffffff;
      }

      .footer-links a {
        display: block;
        margin-bottom: 10px;
        color: #94a3b8;
      }

      .footer-links a:hover {
        color: #ffffff;
      }

      .footer-bottom {
        border-top: 1px solid #334155;
        margin-top: 32px;
        padding-top: 24px;
        text-align: center;
        font-size: 14px;
        color: #64748b;
      }

      @media (max-width: 1024px) {
        .footer-grid {
          grid-template-columns: 1fr 1fr;
        }
      }

      @media (max-width: 768px) {
        .footer-grid {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 1024px) {
        .section {
          padding: 60px 0;
        }
      }

      @media (max-width: 900px) {
        .hero {
          grid-template-columns: 1fr;
          text-align: center;
        }
      }

      @media (max-width: 768px) {
        .section {
          padding: 40px 0;
        }
      }
    </style>
  </head>

  <body>
    <header>
      <div class="container nav" role="navigation" aria-label="Primary">
        <div class="brand">
          <a href="/"
            ><img
              class="logo"
              src="/static/icon.png"
              alt="TAOMA logo"
              width="30"
              height="30"
          /></a>
          <a href="/">TAOMA‚Ñ¢</a>
        </div>
        <button
          type="button"
          class="mobile-toggle"
          id="mobileToggle"
          aria-controls="primary-menu"
          aria-expanded="false"
          aria-label="Toggle menu"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            aria-hidden="true"
          >
            <path
              d="M4 6H20M4 12H20M4 18H20"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
        </button>
        <nav id="primary-menu" class="links" aria-label="Site">
          <a href="/" aria-current="page">Home</a>
          <a href="/api">GIF API</a>
          <a href="/api/gif/admin">Add GIFs</a>
          <a href="/marketplace">Marketplace</a>
          <a href="/linktree/config">Linktree</a>
        </nav>
        <div id="authSlot" class="auth"></div>
      </div>
    </header>

    <main>
      <div class="container">
        <section class="hero">
          <div>
            <div class="eyebrow">User-first hub</div>
            <h1>Ship GIFs. Share Links. Welcome in.</h1>
            <p class="subtitle">
              The Anime GIF API lets you query and contribute community-picked
              reactions. The Linktree builder gives you a polished hub for
              everything you do. Start with the explorer, or jump straight into
              editing your tree.
            </p>
            <div class="cta-row">
              <a class="btn" href="/api">Open GIF API explorer</a>
              <a class="btn ghost" href="/linktree/config"
                >Build your Linktree</a
              >
              <a class="btn ghost" href="/api/gif/admin">Add a new GIF</a>
            </div>
            <div class="tagline">
              <span class="pill">‚ö° Fast explorer + code snippets</span>
              <span class="pill">üß© Add & moderate GIFs with tags</span>
              <span class="pill"
                >üåê Linktree with avatars, music & effects</span
              >
            </div>
          </div>
          <div class="card">
            <div class="chip-row">
              <span class="chip">REST ¬∑ GET/POST/PATCH</span>
              <span class="chip">Rate-limit aware</span>
              <span class="chip">No-Nonsense JSON</span>
            </div>
            <h3>Preview the API</h3>
            <p>Hit the endpoint directly. Swap params and keep moving.</p>
            <pre class="code">
fetch("/api/gifs?character=gojo&nsfw=false")
  .then(res => res.json())
  .then(data => console.log(data));</pre
            >
            <div class="chip-row" style="margin-top: 1rem">
              <span class="chip" style="color: var(--success)"
                >‚úì Own what you add</span
              >
              <span class="chip" style="color: var(--warning)"
                >üö´ Blacklist supported</span
              >
            </div>
          </div>
        </section>

        <section class="section" aria-labelledby="entry-points">
          <div class="notice">
            <div>
              <strong>New navigation:</strong> Portfolio lives under
              <code>/portfolio</code>. Everything here points you to the
              Linktree + GIF API tools.
            </div>
            <a class="btn ghost" href="/portfolio">Go to portfolio</a>
          </div>
        </section>

        <section class="section" aria-labelledby="paths">
          <div
            style="
              display: flex;
              align-items: center;
              gap: 0.6rem;
              flex-wrap: wrap;
              margin-bottom: 0.6rem;
            "
          >
            <h2 id="paths" style="margin: 0">Choose your path</h2>
            <span class="chip">Built for speed</span>
          </div>
          <p class="helper">
            Pick the surface you need. Everything stays dark, fast, and focused
            on shipping.
          </p>
          <div class="grid">
            <article class="card">
              <h3>GIF API Explorer</h3>
              <p>
                Query the Anime GIF API with instant previews and ready-to-copy
                requests.
              </p>
              <div class="chip-row">
                <span class="chip">Query builder</span>
                <span class="chip">cURL & Python snippets</span>
                <span class="chip">Random & filtered</span>
              </div>
              <a class="btn" href="/api">Open explorer</a>
            </article>

            <article class="card">
              <h3>Add & manage GIFs</h3>
              <p>
                Submit new GIFs, tag characters, set NSFW flags, and keep the
                library clean.
              </p>
              <div class="chip-row">
                <span class="chip">Owner-only edits</span>
                <span class="chip">Admin moderation</span>
                <span class="chip">Character + tag search</span>
              </div>
              <a class="btn" href="/api/gif/admin">Add a GIF</a>
            </article>

            <article class="card">
              <h3>Linktree Builder</h3>
              <p>
                Create a personal landing page with media, icons, and effects
                that match your vibe.
              </p>
              <div class="chip-row">
                <span class="chip">Avatars & backgrounds</span>
                <span class="chip">Music & effects</span>
                <span class="chip">Icons & ordering</span>
              </div>
              <a class="btn" href="/linktree/config">Configure Linktree</a>
            </article>
          </div>
        </section>

        <section class="section" aria-labelledby="why">
          <h2 id="why" style="margin: 0 0 0.4rem">Why these tools?</h2>
          <p class="helper">
            They're fast to try, easy to edit, and designed to be shared.
          </p>
          <div class="mini-grid">
            <div class="card">
              <h3>Quick onboarding</h3>
              <p>
                Open the explorer or Linktree editor‚Äîno docs hunt required.
                Inputs are labeled, guardrails included.
              </p>
            </div>
            <div class="card">
              <h3>Shareable by default</h3>
              <p>
                Copy API links, embed GIF URLs, or share your Linktree slug
                anywhere. Everything is HTTPS-ready.
              </p>
            </div>
            <div class="card">
              <h3>Community-friendly</h3>
              <p>
                GIF ownership, blacklists, and admin controls keep the library
                usable for everyone.
              </p>
            </div>
            <div class="card">
              <h3>Still want the portfolio?</h3>
              <p>
                It's one click away at
                <a
                  href="/portfolio"
                  style="color: inherit; text-decoration: underline"
                  >/portfolio</a
                >. You keep the context, but the landing stays focused on you.
              </p>
            </div>
          </div>
        </section>

        <section class="section" aria-labelledby="cta">
          <div class="cta">
            <h2 id="cta">Start your TAOMA space</h2>
            <p>
              Create a Linktree, share your GIF reactions, and ship a homepage
              that looks polished on every device.
            </p>
            <div class="cta-row center">
              <a class="btn light" href="/linktree/config">Create your Linktree</a>
              <a class="btn ghost" href="/api">Explore the GIF API</a>
            </div>
          </div>
        </section>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container footer-grid">
        <div class="footer-brand">
          <div style="font-weight: 700; color: #ffffff">TAOMAT</div>
          <p>
            Build your Linktree, publish GIF reactions, and keep everything
            connected in one clean hub.
          </p>
        </div>
        <div class="footer-links">
          <h3>Product</h3>
          <a href="/api">GIF API</a>
          <a href="/api/gif/admin">Add GIFs</a>
          <a href="/linktree/config">Linktree Builder</a>
          <a href="/marketplace">Marketplace</a>
        </div>
        <div class="footer-links">
          <h3>Connect</h3>
          <a href="https://guns.lol/taoma" target="_blank" rel="noreferrer"
            >guns.lol</a
          >
          <a
            href="https://github.com/TaomasSpace"
            target="_blank"
            rel="noreferrer"
            >GitHub</a
          >
          <a href="mailto:kontakt@taoma.space">Email</a>
          <a href="/datenschutz.html">Privacy Policy</a>
        </div>
      </div>
      <div class="footer-bottom">
        Copyright <span id="year"></span> TAOMAT. All rights reserved.
      </div>
    </footer>

    <script>
      const toggle = document.getElementById("mobileToggle");
      const menu = document.getElementById("primary-menu");
      toggle?.addEventListener("click", () => {
        const open = menu.classList.toggle("open");
        toggle.setAttribute("aria-expanded", String(open));
      });
      const yearEl = document.getElementById("year");
      if (yearEl) yearEl.textContent = new Date().getFullYear();

      function escapeHtml(value) {
        const map = {
          "&": "&amp;",
          "<": "&lt;",
          ">": "&gt;",
          '"': "&quot;",
          "'": "&#39;",
        };
        return String(value ?? "").replace(/[&<>"']/g, (ch) => map[ch] || ch);
      }

      function sanitizeUrl(raw) {
        if (typeof raw !== "string") return "";
        const trimmed = raw.trim();
        if (!trimmed) return "";
        if (trimmed.startsWith("javascript:")) return "";
        try {
          const u = new URL(trimmed, window.location.origin);
          if (["http:", "https:"].includes(u.protocol)) {
            return trimmed.startsWith("http://") ||
              trimmed.startsWith("https://")
              ? u.href
              : trimmed;
          }
        } catch (_) {
          if (trimmed.startsWith("/") && !trimmed.startsWith("//"))
            return trimmed;
        }
        return "";
      }

      async function safe(fn) {
        try {
          return await fn();
        } catch (e) {
          console.error(e);
          return null;
        }
      }

      async function fetchSession() {
        try {
          const r = await safe(() =>
            fetch("/api/auth/verify", { credentials: "include" })
          );
          if (!r || !r.ok) return null;
          return await r.json();
        } catch {
          return null;
        }
      }

      async function renderAuthHeader() {
        const slot = document.getElementById("authSlot");
        if (!slot) return;

        const session = await fetchSession();
        const user = session && session.user ? session.user : null;
        const isAdmin = !!(user && user.admin);

        if (!user) {
          slot.innerHTML = `<a class="btn small" href="/login?next=${encodeURIComponent(
            location.href
          )}">Login</a>
      <a class="btn small" href="/register?next=${encodeURIComponent(
        location.href
      )}">Register</a>`;
          return;
        }

        const uname = user.username || "User";
        const initials = uname.trim().slice(0, 2).toUpperCase() || "U";
        const pfp = sanitizeUrl(user.profile_picture || "");

        slot.innerHTML = `
    <div class="auth-box">
      <button class="avatar-btn" id="avatarBtn" aria-haspopup="menu" aria-expanded="false">
        ${
          pfp
            ? `<img class="avatar" src="${pfp}" alt="${escapeHtml(
                uname
              )}'s profile picture">`
            : `<span class="avatar-fallback" aria-hidden="true">${escapeHtml(
                initials
              )}</span>`
        }
        <span class="uname" style="font-weight:700;font-size:.95rem">${escapeHtml(
          uname
        )}</span>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
      <div class="menu" id="userMenu" role="menu" aria-label="User menu">
        <a href="/profile" role="menuitem">Profile</a>
        ${isAdmin ? `<a href="/admin" role="menuitem">Admin</a>` : ""}
        <button id="logoutBtnHdr" role="menuitem">Logout</button>
      </div>
    </div>`;

        const btn = slot.querySelector("#avatarBtn");
        const menu = slot.querySelector("#userMenu");
        const logoutBtn = slot.querySelector("#logoutBtnHdr");

        function closeMenu() {
          menu?.classList.remove("open");
          btn?.setAttribute("aria-expanded", "false");
        }

        btn?.addEventListener("click", (e) => {
          e.stopPropagation();
          const open = menu?.classList.toggle("open");
          btn.setAttribute("aria-expanded", String(open));
        });

        document.addEventListener("click", (e) => {
          if (
            menu &&
            !menu.contains(e.target) &&
            btn &&
            !btn.contains(e.target)
          ) {
            closeMenu();
          }
        });

        logoutBtn?.addEventListener(
          "click",
          async () => {
            try {
              await fetch("/api/auth/logout", {
                method: "POST",
                credentials: "include",
              });
            } catch {}
            location.href = "/";
          },
          { passive: true }
        );
      }

      renderAuthHeader();
    </script>
  </body>
</html>
