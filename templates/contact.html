{% extends "base.html" %}

{% block title %}TAOMA™ — Contact{% endblock %}
{% block meta_description %}Get in touch for small websites, bots, or backend work. I’m open to interesting projects and ideas.{% endblock %}
{% block og_title %}TAOMA™ — Contact{% endblock %}
{% block og_description %}Projects, skills, and contact.{% endblock %}

{% block extra_head %}
<style>
  /* Contact-only styles */
  #contactForm label { display:block; margin-bottom:.9rem; }
  #contactForm input, #contactForm textarea {
    width:100%; margin-top:.35rem; padding:.75rem .85rem; border-radius:12px;
    border:1px solid #ffffff26; background:var(--bg-soft); color:var(--ink); outline:none;
  }
  #contactForm input:focus, #contactForm textarea:focus {
    border-color:#ffffff3a; box-shadow:0 0 0 6px var(--ring);
  }
  .grid2 { display:grid; gap:.9rem; grid-template-columns:1fr 1fr; }
  @media (max-width:700px){ .grid2 { grid-template-columns:1fr; } }
  /* Honeypot */
  .hp { position:absolute; left:-9999px; opacity:0; height:0; width:0; }
</style>
{% endblock %}

{% block content %}
  <!-- Hero -->
  <section class="hero">
    <h1 class="title">Contact</h1>
    <p class="subtitle">
      I really like to help and do stuff for others. If you have questions or want your own website,
      feel free to contact me!
    </p>

    <!-- Contact section -->
    <section id="contact">
      <h2 class="section-title">Contact</h2>
      <div class="card" style="padding:1.25rem">
        <p class="muted" style="margin-top:0">
          Want to collaborate or just say hi? I’m open to interesting projects and ideas.
        </p>

        <div class="card" style="padding:1.25rem; margin-bottom:1rem">
          <form id="contactForm" novalidate>
            <div class="grid2">
              <label>
                <span class="muted">Name</span>
                <input name="name" type="text" required placeholder="Your name" autocomplete="name">
              </label>
              <label>
                <span class="muted">Email</span>
                <input name="email" type="email" required placeholder="you@example.com" autocomplete="email" inputmode="email">
              </label>
            </div>

            <label>
              <span class="muted">Subject</span>
              <input name="subject" type="text" required placeholder="What’s up?">
            </label>

            <label>
              <span class="muted">Message</span>
              <textarea name="message" rows="6" required placeholder="Tell me about your project…"></textarea>
            </label>

            <!-- Honeypot (unsichtbar für Menschen) -->
            <input class="hp" type="text" name="website" autocomplete="off" tabindex="-1" aria-hidden="true">

            <div class="cta" style="justify-content:flex-start">
              <button id="sendBtn" class="btn" type="submit">Send</button>
              <span id="formMsg" class="muted" style="margin-left:.75rem;" aria-live="polite"></span>
            </div>
          </form>
        </div>

        <div class="cta">
          <a class="btn" href="mailto:Taoma.M@proton.me" aria-label="Email">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M4 6h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2Zm16 0-8 7L4 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Email me
          </a>
          <a class="btn ghost" href="https://github.com/TaomasSpace" target="_blank" rel="noreferrer" aria-label="GitHub profile">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M12 2C6.477 2 2 6.477 2 12a10 10 0 0 0 6.838 9.488c.5.092.682-.216.682-.48 0-.237-.01-1.026-.015-1.862-2.782.604-3.369-1.18-3.369-1.18-.455-1.156-1.11-1.464-1.11-1.464-.907-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.088 2.91.833.092-.647.35-1.088.636-1.339-2.22-.252-4.555-1.11-4.555-4.943 0-1.091.39-1.987 1.03-2.688-.103-.252-.447-1.268.098-2.643 0 0 .84-.269 2.75 1.026A9.58 9.58 0 0 1 12 6.844c.85.004 1.707.115 2.506.337 1.909-1.295 2.748-1.026 2.748-1.026.547 1.375.203 2.39.1 2.643.64.701 1.028 1.597 1.028 2.688 0 3.842-2.338 4.688-4.566 4.936.358.31.677.92.677 1.855 0 1.338-.012 2.419-.012 2.748 0 .267.18.577.688.478A10.003 10.003 0 0 0 22 12c0-5.523-4.477-10-10-10Z" fill="currentColor"/>
            </svg>
            GitHub
          </a>
          <a class="btn ghost" href="https://discord.gg/H3NDg7e3vD" target="_blank" rel="noreferrer" aria-label="Discord server">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M20 4a18 18 0 0 0-4.5-1.5l-.2.4A16.4 16.4 0 0 1 12 3c-1.1 0-2.2.1-3.3.3l-.2-.4A18 18 0 0 0 4 4c-1.3 2-2 4.2-2 6.5 0 6.7 4.5 8.6 8.8 8.6h.7l-.3-1a9 9 0 0 1-1.7-.6l.4-.2c.8.4 1.7.6 2.6.6s1.8-.2 2.6-.6l.4.2a9 9 0 0 1-1.7.6l-.3 1h.7C17.5 19.1 22 17.2 22 10.5 22 8.2 21.3 6 20 4ZM9.5 14.2c-.8 0-1.5-.8-1.5-1.8s.7-1.8 1.5-1.8S11 11.4 11 12.4s-.7 1.8-1.5 1.8Zm5 0c-.8 0-1.5-.8-1.5-1.8s.7-1.8 1.5-1.8 1.5.8 1.5 1.8-.7 1.8-1.5 1.8Z" fill="currentColor"/>
            </svg>
            Discord
          </a>
        </div>
      </div>
    </section>
{% endblock %}

{% block extra_scripts %}
<script>
  // Contact form submit
  const form = document.getElementById('contactForm');
  const btn  = document.getElementById('sendBtn');
  const msg  = document.getElementById('formMsg');

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    msg.textContent = "";
    btn.disabled = true;
    const orig = btn.textContent;
    btn.textContent = "Sending…";

    // FormData -> object
    const data = Object.fromEntries(new FormData(form).entries());

    // Honeypot: if filled, treat as spam
    if (data.website) {
      btn.disabled = false; btn.textContent = orig;
      return; // quietly drop
    }

    // Tiny client-side validation (defensiv)
    if (!data.name || !data.email || !data.subject || !data.message) {
      msg.textContent = "Please fill out all fields.";
      btn.disabled = false; btn.textContent = orig;
      return;
    }

    try {
      const res = await fetch('/api/contact', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      if (!res.ok) throw new Error(await res.text());
      form.reset();
      msg.textContent = "Thanks! I’ll get back to you soon.";
    } catch (err) {
      msg.textContent = "Oops, delivery failed. Try again later.";
    } finally {
      btn.disabled = false;
      btn.textContent = orig;
    }
  });
</script>
{% endblock %}
